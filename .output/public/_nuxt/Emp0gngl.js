import{g as n,I as f,y as d,C as e,N as I,D as p,A as N,P as ee,r as V,o as ne,x as A,Q as de,B as t,L as a,R as H,S as Q,T as q,J as P,K,z,_ as oe,U as te,M as ie,V as re,k as le,W as ue}from"#entry";import{u as Y}from"./C95MDVUh.js";import{_ as ce,a as me,b as ve}from"./QI28XbNY.js";const _e={__name:"ExportWorkspacesButton",props:{label:{type:String,default:"Export All"},variant:{type:String,default:"text"},color:{type:String,default:"success"},size:{type:String,default:"default"},icon:{type:Boolean,default:!0},iconPosition:{type:String,default:"start"},block:{type:Boolean,default:!1},filename:{type:String,default:"equine-workspaces"}},setup(k){const v=k,c=()=>{const m=JSON.parse(localStorage.getItem("equine-workspaces")||"[]");if(m.length===0){console.warn("No workspaces to export, genius");return}const i=JSON.stringify(m,null,2),u=new Blob([i],{type:"application/json"}),l=URL.createObjectURL(u),g=document.createElement("a");g.href=l,g.download=`${v.filename}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(l)};return(m,i)=>{const u=n("v-icon"),l=n("v-btn");return d(),f(l,{variant:k.variant,color:k.color,size:k.size,block:k.block,onClick:c},{default:e(()=>[k.icon?(d(),f(u,{key:0,start:k.iconPosition==="start",end:k.iconPosition==="end"},{default:e(()=>[...i[0]||(i[0]=[p(" mdi-download ",-1)])]),_:1},8,["start","end"])):I("",!0),p(" "+N(k.label),1)]),_:1},8,["variant","color","size","block"])}}},pe={__name:"WorkspaceSwitcher",setup(k){const v=Y(),{workspaces:c,currentWorkspace:m}=ee(v),i=V(!1),u=V(null),l=V("");ne(()=>{v.loadFromStorage()});const g=r=>{v.setCurrentWorkspace(r),i.value=!1},U=r=>{v.deleteWorkspace(r)},C=r=>{u.value=r.id,l.value=r.name},y=r=>{if(!l.value.trim()){T();return}v.renameWorkspace(r,l.value),T()},T=()=>{u.value=null,l.value=""},D=r=>r?new Date(r).toLocaleDateString():"No date";return(r,o)=>{const W=n("v-icon"),_=n("v-btn"),x=n("v-card-title"),$=n("v-list-item-title"),E=n("v-text-field"),O=n("v-list-item-subtitle"),M=n("v-list-item"),h=n("v-list"),B=_e,s=n("v-spacer"),w=n("v-card-actions"),b=n("v-card"),j=n("v-dialog");return d(),A("div",null,[a(m)?(d(),f(_,{key:0,variant:"text",class:"text-h5 ps-0",onClick:o[0]||(o[0]=S=>i.value=!0)},{default:e(()=>[p(N(a(m).name)+" ",1),t(W,{end:""},{default:e(()=>[...o[5]||(o[5]=[p("mdi-chevron-down",-1)])]),_:1})]),_:1})):de(r.$slots,"empty",{key:1},()=>[o[6]||(o[6]=z("h2",null,"No Workspace Selected",-1))]),t(j,{modelValue:a(i),"onUpdate:modelValue":o[4]||(o[4]=S=>K(i)?i.value=S:null),"max-width":"500"},{default:e(()=>[t(b,null,{default:e(()=>[t(x,null,{default:e(()=>[...o[7]||(o[7]=[p("Switch Workspace",-1)])]),_:1}),t(h,null,{default:e(()=>[(d(!0),A(H,null,Q(a(c),S=>(d(),f(M,{key:S.id,onClick:L=>g(S.id),active:S.id===a(m)?.id,"active-color":"primary"},{append:e(()=>[a(u)!==S.id?(d(),f(_,{key:0,icon:"mdi-pencil",variant:"text",size:"small",onClick:q(L=>C(S),["stop"])},null,8,["onClick"])):(d(),A(H,{key:1},[t(_,{icon:"mdi-check",variant:"text",size:"small",color:"success",onClick:q(L=>y(S.id),["stop"])},null,8,["onClick"]),t(_,{icon:"mdi-close",variant:"text",size:"small",color:"error",onClick:q(T,["stop"])})],64)),S.id!==a(m)?.id&&a(u)!==S.id?(d(),f(_,{key:2,icon:"mdi-delete",variant:"text",size:"small",onClick:q(L=>U(S.id),["stop"])},null,8,["onClick"])):I("",!0)]),default:e(()=>[a(u)!==S.id?(d(),f($,{key:0},{default:e(()=>[p(N(S.name),1)]),_:2},1024)):(d(),f(E,{key:1,modelValue:a(l),"onUpdate:modelValue":o[1]||(o[1]=L=>K(l)?l.value=L:null),density:"compact",variant:"outlined","hide-details":"",autofocus:"",onKeyup:[P(L=>y(S.id),["enter"]),P(T,["esc"])],onClick:o[2]||(o[2]=q(()=>{},["stop"]))},null,8,["modelValue","onKeyup"])),t(O,null,{default:e(()=>[p(" Created "+N(D(S.created))+" â€¢ "+N(S.tasks?.length||0)+" tasks ",1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128)),a(c).length===0?(d(),f(M,{key:0},{default:e(()=>[t($,{class:"text-center text-medium-emphasis"},{default:e(()=>[...o[8]||(o[8]=[p(" No workspaces yet ",-1)])]),_:1})]),_:1})):I("",!0)]),_:1}),t(w,null,{default:e(()=>[t(B),t(s),t(_,{variant:"text",onClick:o[3]||(o[3]=S=>i.value=!1)},{default:e(()=>[...o[9]||(o[9]=[p("Close",-1)])]),_:1}),t(_,{color:"primary",variant:"tonal",to:"/"},{default:e(()=>[t(W,{start:""},{default:e(()=>[...o[10]||(o[10]=[p("mdi-plus",-1)])]),_:1}),o[11]||(o[11]=p(" New Workspace ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},fe={__name:"WorkspaceHeader",props:{taskCount:{type:Number,default:0},hasWorkspace:{type:Boolean,default:!1}},setup(k){return(v,c)=>{const m=pe,i=n("v-card-subtitle"),u=n("v-btn"),l=n("v-card-title"),g=n("v-card");return d(),f(g,{class:"mb-4",variant:"flat"},{default:e(()=>[t(l,{class:"d-flex justify-space-between align-center"},{default:e(()=>[z("div",null,[t(m),t(i,{class:"pa-0"},{default:e(()=>[p(N(k.taskCount)+" task"+N(k.taskCount!==1?"s":""),1)]),_:1})]),k.hasWorkspace?I("",!0):(d(),f(u,{key:0,color:"primary",variant:"tonal",to:"/"},{default:e(()=>[...c[0]||(c[0]=[p(" Create Workspace ",-1)])]),_:1}))]),_:1})]),_:1})}}},ke={};function ge(k,v){const c=ce,m=n("v-card-text"),i=n("v-card");return d(),f(i,{class:"mb-4",variant:"flat"},{default:e(()=>[t(m,null,{default:e(()=>[t(c,{placeholder:"Search tasks in this workspace..."})]),_:1})]),_:1})}const ye=Object.assign(oe(ke,[["render",ge]]),{__name:"SearchCard"}),xe={__name:"OverdueAlert",props:{count:{type:Number,required:!0}},emits:["reschedule"],setup(k){return(v,c)=>{const m=n("v-icon"),i=n("v-btn"),u=n("v-card-text"),l=n("v-card");return d(),f(l,{class:"mb-4",color:"error",variant:"tonal"},{default:e(()=>[t(u,{class:"d-flex justify-space-between align-center"},{default:e(()=>[z("div",null,[t(m,{start:""},{default:e(()=>[...c[1]||(c[1]=[p("mdi-alert",-1)])]),_:1}),p(" You have "+N(k.count)+" overdue task"+N(k.count!==1?"s":""),1)]),t(i,{color:"error",variant:"flat",onClick:c[0]||(c[0]=g=>v.$emit("reschedule"))},{default:e(()=>[...c[2]||(c[2]=[p(" Move All to Today ",-1)])]),_:1})]),_:1})]),_:1})}}},be={class:"d-flex align-start w-100"},Ce={class:"flex-grow-1",style:{"word-break":"break-word","min-width":"0"}},Te={class:"d-flex align-center ml-2",style:{"flex-shrink":"0"}},Ve={key:0,class:"mt-2"},we={key:1,class:"text-center py-4 text-medium-emphasis"},Se={__name:"TaskNotesModal",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(k,{emit:v}){const c=k,m=v,i=V(!1),u=V([]),l=V(""),g=V(null),U=V("");te(i,_=>{_&&(u.value=JSON.parse(JSON.stringify(c.modelValue||[])))});const C=()=>{l.value.trim()&&(u.value.push({text:l.value,imageUrl:null}),l.value="")},y=_=>{u.value.splice(_,1)},T=_=>{g.value=_,U.value=u.value[_].imageUrl||""},D=_=>{u.value[_].imageUrl=U.value||null,r()},r=()=>{g.value=null,U.value=""},o=()=>{m("update:modelValue",u.value),i.value=!1},W=()=>{u.value=[],l.value="",i.value=!1};return(_,x)=>{const $=n("v-btn"),E=n("v-card-title"),O=n("v-icon"),M=n("v-chip"),h=n("v-text-field"),B=n("v-expand-transition"),s=n("v-list-item"),w=n("v-list"),b=n("v-divider"),j=n("v-card-text"),S=n("v-spacer"),L=n("v-card-actions"),G=n("v-card"),X=n("v-dialog");return d(),f(X,{modelValue:i.value,"onUpdate:modelValue":x[2]||(x[2]=R=>i.value=R),"max-width":"600"},{activator:e(({props:R})=>[t($,ie(R,{variant:"tonal",size:"small",class:"ms-2"}),{default:e(()=>[...x[3]||(x[3]=[p(" Add Notes ",-1)])]),_:1},16)]),default:e(()=>[t(G,null,{default:e(()=>[t(E,null,{default:e(()=>[...x[4]||(x[4]=[p("Task Notes",-1)])]),_:1}),t(j,null,{default:e(()=>[u.value.length>0?(d(),f(w,{key:0,class:"mb-3"},{default:e(()=>[(d(!0),A(H,null,Q(u.value,(R,F)=>(d(),f(s,{key:F,class:"px-0"},{default:e(()=>[z("div",be,[z("div",Ce,N(R.text),1),z("div",Te,[R.imageUrl?(d(),f(M,{key:0,size:"small",color:"success",variant:"tonal",class:"ms-2"},{default:e(()=>[t(O,{start:"",size:"small"},{default:e(()=>[...x[5]||(x[5]=[p("mdi-image",-1)])]),_:1}),x[6]||(x[6]=p(" Image ",-1))]),_:1})):I("",!0),t($,{icon:R.imageUrl?"mdi-image-edit":"mdi-image-plus",size:"small",variant:"text",onClick:J=>T(F)},null,8,["icon","onClick"]),t($,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:J=>y(F)},null,8,["onClick"])])]),t(B,null,{default:e(()=>[g.value===F?(d(),A("div",Ve,[t(h,{modelValue:U.value,"onUpdate:modelValue":x[0]||(x[0]=J=>U.value=J),label:"Image URL for this note",density:"compact",variant:"outlined","hide-details":"",onKeyup:[P(J=>D(F),["enter"]),P(r,["esc"])]},{"append-inner":e(()=>[t($,{icon:"mdi-check",size:"x-small",variant:"text",color:"success",onClick:J=>D(F)},null,8,["onClick"])]),_:2},1032,["modelValue","onKeyup"])])):I("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),A("div",we," No notes yet ")),t(b,{class:"mb-3"}),t(h,{modelValue:l.value,"onUpdate:modelValue":x[1]||(x[1]=R=>l.value=R),label:"Add a note...",density:"compact",variant:"outlined","hide-details":"",onKeyup:P(C,["enter"])},{"append-inner":e(()=>[t($,{icon:"mdi-plus",size:"small",variant:"text",disabled:!l.value.trim(),onClick:C},null,8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),t(L,null,{default:e(()=>[t(S),t($,{variant:"text",onClick:W},{default:e(()=>[...x[7]||(x[7]=[p("Cancel",-1)])]),_:1}),t($,{color:"primary",variant:"flat",onClick:o},{default:e(()=>[...x[8]||(x[8]=[p("Save Notes",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},$e={key:0,class:"mt-4"},Ue={class:"mt-3"},Ie={key:0,class:"mt-2"},Ne={__name:"AddTaskForm",emits:["task-added"],setup(k,{emit:v}){const c=v,m=V(""),i=V(!1),u=V(""),l=V(""),g=V([]),U=V(!1);te(i,r=>{r&&!u.value&&y()});const C=r=>{if(!r)return!1;try{const o=new URL(r);return o.protocol==="http:"||o.protocol==="https:"}catch{return!1}},y=()=>{const r=new Date;u.value=r.toISOString().split("T")[0]},T=()=>{const r=new Date;r.setDate(r.getDate()+1),u.value=r.toISOString().split("T")[0]},D=()=>{if(!m.value.trim())return;const r={id:Date.now().toString(),text:m.value,created:new Date().toISOString(),hasDeadline:i.value,due:i.value&&u.value?u.value:null,completed:!1,completedAt:null,imageUrl:l.value&&C(l.value)?l.value:null,notes:g.value||[]};c("task-added",r),m.value="",i.value=!1,u.value="",l.value="",g.value=[],U.value=!1};return(r,o)=>{const W=n("v-text-field"),_=n("v-col"),x=n("v-checkbox"),$=n("v-btn"),E=n("v-row"),O=n("v-expand-transition"),M=n("v-icon"),h=Se,B=n("v-img"),s=n("v-card-text"),w=n("v-card");return d(),f(w,{class:"mb-4"},{default:e(()=>[t(s,null,{default:e(()=>[t(E,{align:"center","no-gutters":""},{default:e(()=>[t(_,null,{default:e(()=>[t(W,{modelValue:a(m),"onUpdate:modelValue":o[0]||(o[0]=b=>K(m)?m.value=b:null),label:"Add a task...",variant:"outlined",density:"comfortable",onKeyup:P(D,["enter"]),"hide-details":""},null,8,["modelValue"])]),_:1}),t(_,{cols:"auto",class:"ms-2"},{default:e(()=>[t(x,{modelValue:a(i),"onUpdate:modelValue":o[1]||(o[1]=b=>K(i)?i.value=b:null),label:"Has deadline",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),t(_,{cols:"auto",class:"ms-2"},{default:e(()=>[t($,{icon:"mdi-plus",variant:"tonal",onClick:D,disabled:!a(m).trim()},null,8,["disabled"])]),_:1})]),_:1}),t(O,null,{default:e(()=>[a(i)?(d(),A("div",$e,[t(E,{"no-gutters":"",align:"center"},{default:e(()=>[t(_,null,{default:e(()=>[t(W,{modelValue:a(u),"onUpdate:modelValue":o[2]||(o[2]=b=>K(u)?u.value=b:null),label:"Due date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),t(_,{cols:"auto",class:"ms-2"},{default:e(()=>[t($,{variant:"tonal",color:"primary",onClick:y},{default:e(()=>[...o[6]||(o[6]=[p(" Today ",-1)])]),_:1})]),_:1}),t(_,{cols:"auto",class:"ms-2"},{default:e(()=>[t($,{variant:"tonal",onClick:T},{default:e(()=>[...o[7]||(o[7]=[p(" Tomorrow ",-1)])]),_:1})]),_:1})]),_:1})])):I("",!0)]),_:1}),z("div",Ue,[t(E,{"no-gutters":"",align:"center"},{default:e(()=>[t(_,null,{default:e(()=>[t(W,{modelValue:a(l),"onUpdate:modelValue":o[3]||(o[3]=b=>K(l)?l.value=b:null),label:"Image URL (optional)",variant:"outlined",density:"compact","hide-details":"",clearable:""},{"append-inner":e(()=>[a(l)&&C(a(l))?(d(),f(M,{key:0,color:"success"},{default:e(()=>[...o[8]||(o[8]=[p(" mdi-check ",-1)])]),_:1})):I("",!0)]),_:1},8,["modelValue"])]),_:1}),t(_,{cols:"auto"},{default:e(()=>[t(h,{modelValue:a(g),"onUpdate:modelValue":o[4]||(o[4]=b=>K(g)?g.value=b:null)},null,8,["modelValue"])]),_:1})]),_:1}),t(O,null,{default:e(()=>[a(l)&&C(a(l))?(d(),A("div",Ie,[t(B,{src:a(l),"max-height":"200",class:"rounded",cover:"",onError:o[5]||(o[5]=b=>U.value=!0)},{error:e(()=>[...o[9]||(o[9]=[z("div",{class:"text-center pa-4 text-error"}," Failed to load image ",-1)])]),_:1},8,["src"])])):I("",!0)]),_:1})])]),_:1})]),_:1})}}},De={__name:"TaskList",props:{tasks:{type:Array,default:()=>[]},completedCount:{type:Number,default:0}},emits:["task-updated","task-deleted","clear-completed","edit-image","edit-note-image","move-task"],setup(k,{emit:v}){const c=v,m=re(),i=Y(),u=le(()=>m.current.value.dark?"background-color: rgba(255, 255, 255, 0.05)":"background-color: rgba(0, 0, 0, 0.03)"),l=C=>{i.toggleTaskComplete(C)},g=C=>{c("edit-image",C)},U=C=>{c("edit-note-image",C)};return(C,y)=>{const T=n("v-chip"),D=n("v-btn"),r=me,o=n("v-card-text"),W=n("v-card");return d(),A("div",null,[z("div",{class:"d-flex justify-space-between align-center mb-4 pa-3 rounded-lg",style:ue(a(u))},[y[5]||(y[5]=z("span",{class:"text-h6 font-weight-medium"},"Tasks",-1)),z("div",null,[k.completedCount>0?(d(),f(T,{key:0,size:"small",variant:"tonal",class:"me-2"},{default:e(()=>[p(N(k.completedCount)+" completed ",1)]),_:1})):I("",!0),k.completedCount>0?(d(),f(D,{key:1,size:"small",variant:"text",color:"error",onClick:y[0]||(y[0]=_=>C.$emit("clear-completed"))},{default:e(()=>[...y[4]||(y[4]=[p(" Clear Completed ",-1)])]),_:1})):I("",!0)])],4),(d(!0),A(H,null,Q(k.tasks,_=>(d(),f(r,{key:_.id,task:_,onUpdate:y[1]||(y[1]=x=>C.$emit("task-updated",x)),onDelete:y[2]||(y[2]=x=>C.$emit("task-deleted",x)),onToggleComplete:l,onEditImage:g,onEditNoteImage:U,onMoveTask:y[3]||(y[3]=x=>C.$emit("move-task",x)),class:"mb-3"},null,8,["task"]))),128)),k.tasks.length===0?(d(),f(W,{key:0,variant:"flat"},{default:e(()=>[t(o,{class:"text-center py-8 text-medium-emphasis"},{default:e(()=>[...y[6]||(y[6]=[p(" No tasks yet. Stop horsing around. ",-1)])]),_:1})]),_:1})):I("",!0)])}}},We={};function ze(k,v){const c=n("v-icon"),m=n("v-card-text"),i=n("v-card");return d(),f(i,{class:"mt-8",variant:"flat"},{default:e(()=>[t(m,{class:"text-center py-16"},{default:e(()=>[t(c,{icon:"mdi-folder-open-outline",size:"80",color:"grey-lighten-1",class:"mb-6"}),v[0]||(v[0]=z("h2",{class:"text-h4 mb-3 text-grey-darken-2"},"No workspace selected",-1)),v[1]||(v[1]=z("p",{class:"text-body-1 text-grey mb-6"}," Select a workspace from the sidebar to view and manage your tasks ",-1))]),_:1})]),_:1})}const Ee=Object.assign(oe(We,[["render",ze]]),{__name:"EmptyState"}),Oe={class:"text-body-2 text-medium-emphasis mt-1",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},Re={__name:"MoveTaskDialog",props:{modelValue:{type:Boolean,default:!1},currentWorkspaceId:{type:String,required:!0},taskName:{type:String,default:"this task"}},emits:["update:modelValue","confirm"],setup(k,{emit:v}){const c=k,m=v,i=Y(),{workspaces:u}=ee(i),l=V(null),g=le(()=>u.value.filter(y=>y.id!==c.currentWorkspaceId));te(()=>c.modelValue,y=>{y||(l.value=null)});const U=()=>{l.value&&(m("confirm",l.value),m("update:modelValue",!1))},C=()=>{l.value=null,m("update:modelValue",!1)};return(y,T)=>{const D=n("v-card-title"),r=n("v-list-item-title"),o=n("v-list-item-subtitle"),W=n("v-list-item"),_=n("v-list"),x=n("v-alert"),$=n("v-card-text"),E=n("v-spacer"),O=n("v-btn"),M=n("v-card-actions"),h=n("v-card"),B=n("v-dialog");return d(),f(B,{"model-value":k.modelValue,"onUpdate:modelValue":T[0]||(T[0]=s=>y.$emit("update:modelValue",s)),"max-width":"500"},{default:e(()=>[t(h,null,{default:e(()=>[t(D,null,{default:e(()=>[T[1]||(T[1]=p(" Move Task ",-1)),z("div",Oe,' Select destination workspace for "'+N(k.taskName)+'" ',1)]),_:1}),t($,null,{default:e(()=>[a(g).length>0?(d(),f(_,{key:0},{default:e(()=>[(d(!0),A(H,null,Q(a(g),s=>(d(),f(W,{key:s.id,value:s.id,onClick:w=>l.value=s.id,active:a(l)===s.id,rounded:"",class:"mb-2"},{default:e(()=>[t(r,null,{default:e(()=>[p(N(s.name),1)]),_:2},1024),t(o,null,{default:e(()=>[p(N(s.tasks?.length||0)+" task"+N(s.tasks?.length!==1?"s":""),1)]),_:2},1024)]),_:2},1032,["value","onClick","active"]))),128))]),_:1})):(d(),f(x,{key:1,type:"info",variant:"tonal",class:"mt-2"},{default:e(()=>[...T[2]||(T[2]=[p(" No other workspaces available. Create a new workspace first. ",-1)])]),_:1}))]),_:1}),t(M,null,{default:e(()=>[t(E),t(O,{variant:"text",onClick:C},{default:e(()=>[...T[3]||(T[3]=[p(" Cancel ",-1)])]),_:1}),t(O,{color:"primary",variant:"flat",disabled:!a(l),onClick:U},{default:e(()=>[...T[4]||(T[4]=[p(" Move Task ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Le={__name:"index",setup(k){const v=Y(),{currentWorkspace:c,currentTasks:m,filteredCurrentTasks:i,completedCount:u,overdueCount:l}=ee(v),g=V(!1),U=V(""),C=V(""),y=V(null),T=V(""),D=V(null),r=V(!1),o=V(null),W=s=>{o.value=s,r.value=!0},_=s=>{o.value&&c.value&&v.moveTaskToWorkspace(o.value.id,c.value.id,s)&&console.log("Task moved successfully"),r.value=!1,o.value=null};ne(()=>{v.loadFromStorage()});const x=()=>{const s=v.rescheduleOverdueTasks();console.log(`Rescheduled ${s} tasks to today`)},$=s=>{const w=[...m.value,s];v.updateCurrentTasks(w),v.clearSearch()},E=s=>{const w=m.value.map(b=>b.id===s.id?s:b);v.updateCurrentTasks(w)},O=s=>{const w=m.value.filter(b=>b.id!==s);v.updateCurrentTasks(w)},M=s=>{if(s.type==="task"){const w=m.value.map(b=>b.id===s.taskId?{...b,imageUrl:s.url}:b);v.updateCurrentTasks(w)}else if(s.type==="note"){const w=m.value.map(b=>{if(b.id===s.taskId){const j=[...b.notes||[]];return j[s.noteIndex]&&(j[s.noteIndex].imageUrl=s.url),{...b,notes:j}}return b});v.updateCurrentTasks(w)}g.value=!1},h=s=>{U.value=s.task.imageUrl,C.value=s.task.imageUrl||"",y.value=s.task.id,T.value="task",g.value=!0},B=s=>{U.value=s.note.imageUrl,C.value=s.note.imageUrl||"",y.value=s.task.id,D.value=s.index,T.value="note",g.value=!0};return(s,w)=>{const b=fe,j=ye,S=xe,L=Ne,G=De,X=Ee,R=n("v-col"),F=n("v-row"),J=ve,ae=Re,se=n("v-container");return d(),f(se,{class:"py-8"},{default:e(()=>[t(F,null,{default:e(()=>[t(R,{cols:"12",md:"8",class:"mx-auto"},{default:e(()=>[t(b,{"task-count":a(i).length,"has-workspace":!!a(c)},null,8,["task-count","has-workspace"]),a(c)?(d(),f(j,{key:0})):I("",!0),a(l)>0&&a(c)?(d(),f(S,{key:1,count:a(l),onReschedule:x},null,8,["count"])):I("",!0),a(c)?(d(),f(L,{key:2,onTaskAdded:$})):I("",!0),a(c)?(d(),f(G,{key:3,tasks:a(i),"completed-count":a(u),onTaskUpdated:E,onTaskDeleted:O,onClearCompleted:a(v).clearCompleted,onEditImage:h,onEditNoteImage:B,onMoveTask:W},null,8,["tasks","completed-count","onClearCompleted"])):I("",!0),a(c)?I("",!0):(d(),f(X,{key:4}))]),_:1})]),_:1}),t(J,{modelValue:a(g),"onUpdate:modelValue":w[0]||(w[0]=Z=>K(g)?g.value=Z:null),"image-url":a(C),"task-id":a(y),type:a(T),"note-index":a(D),onUpdate:M},null,8,["modelValue","image-url","task-id","type","note-index"]),t(ae,{modelValue:a(r),"onUpdate:modelValue":w[1]||(w[1]=Z=>K(r)?r.value=Z:null),"current-workspace-id":a(c)?.id||"","task-name":a(o)?.text,onConfirm:_},null,8,["modelValue","current-workspace-id","task-name"])]),_:1})}}};export{Le as default};
