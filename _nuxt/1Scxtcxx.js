import{g as o,I as k,y as s,C as e,N as $,D as r,A as W,P as oe,r as w,o as ne,x as F,Q as me,B as t,L as l,R as X,S as ee,T as Y,J as G,K,z as A,_ as le,U as ve,k as ae,V as pe,W as Z,M as _e}from"#entry";import{u as te}from"./C95MDVUh.js";import{_ as fe,a as ke,b as ge}from"./D18Femf_.js";const ye={__name:"ExportWorkspacesButton",props:{label:{type:String,default:"Export All"},variant:{type:String,default:"text"},color:{type:String,default:"success"},size:{type:String,default:"default"},icon:{type:Boolean,default:!0},iconPosition:{type:String,default:"start"},block:{type:Boolean,default:!1},filename:{type:String,default:"equine-workspaces"}},setup(p){const f=p,_=()=>{const b=JSON.parse(localStorage.getItem("equine-workspaces")||"[]");if(b.length===0){console.warn("No workspaces to export, genius");return}const c=JSON.stringify(b,null,2),i=new Blob([c],{type:"application/json"}),a=URL.createObjectURL(i),u=document.createElement("a");u.href=a,u.download=`${f.filename}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(a)};return(b,c)=>{const i=o("v-icon"),a=o("v-btn");return s(),k(a,{variant:p.variant,color:p.color,size:p.size,block:p.block,onClick:_},{default:e(()=>[p.icon?(s(),k(i,{key:0,start:p.iconPosition==="start",end:p.iconPosition==="end"},{default:e(()=>[...c[0]||(c[0]=[r(" mdi-download ",-1)])]),_:1},8,["start","end"])):$("",!0),r(" "+W(p.label),1)]),_:1},8,["variant","color","size","block"])}}},be={__name:"WorkspaceSwitcher",setup(p){const f=te(),{workspaces:_,currentWorkspace:b}=oe(f),c=w(!1),i=w(null),a=w("");ne(()=>{f.loadFromStorage()});const u=x=>{f.setCurrentWorkspace(x),c.value=!1},N=x=>{f.deleteWorkspace(x)},S=x=>{i.value=x.id,a.value=x.name},g=x=>{if(!a.value.trim()){T();return}f.renameWorkspace(x,a.value),T()},T=()=>{i.value=null,a.value=""},O=x=>x?new Date(x).toLocaleDateString():"No date";return(x,d)=>{const C=o("v-icon"),n=o("v-btn"),y=o("v-card-title"),R=o("v-list-item-title"),I=o("v-text-field"),L=o("v-list-item-subtitle"),M=o("v-list-item"),B=o("v-list"),h=ye,U=o("v-spacer"),J=o("v-card-actions"),m=o("v-card"),V=o("v-dialog");return s(),F("div",null,[l(b)?(s(),k(n,{key:0,variant:"text",class:"text-h5 ps-0",onClick:d[0]||(d[0]=v=>c.value=!0)},{default:e(()=>[r(W(l(b).name)+" ",1),t(C,{end:""},{default:e(()=>[...d[5]||(d[5]=[r("mdi-chevron-down",-1)])]),_:1})]),_:1})):me(x.$slots,"empty",{key:1},()=>[d[6]||(d[6]=A("h2",null,"No Workspace Selected",-1))]),t(V,{modelValue:l(c),"onUpdate:modelValue":d[4]||(d[4]=v=>K(c)?c.value=v:null),"max-width":"500"},{default:e(()=>[t(m,null,{default:e(()=>[t(y,null,{default:e(()=>[...d[7]||(d[7]=[r("Switch Workspace",-1)])]),_:1}),t(B,null,{default:e(()=>[(s(!0),F(X,null,ee(l(_),v=>(s(),k(M,{key:v.id,onClick:D=>u(v.id),active:v.id===l(b)?.id,"active-color":"primary"},{append:e(()=>[l(i)!==v.id?(s(),k(n,{key:0,icon:"mdi-pencil",variant:"text",size:"small",onClick:Y(D=>S(v),["stop"])},null,8,["onClick"])):(s(),F(X,{key:1},[t(n,{icon:"mdi-check",variant:"text",size:"small",color:"success",onClick:Y(D=>g(v.id),["stop"])},null,8,["onClick"]),t(n,{icon:"mdi-close",variant:"text",size:"small",color:"error",onClick:Y(T,["stop"])})],64)),v.id!==l(b)?.id&&l(i)!==v.id?(s(),k(n,{key:2,icon:"mdi-delete",variant:"text",size:"small",onClick:Y(D=>N(v.id),["stop"])},null,8,["onClick"])):$("",!0)]),default:e(()=>[l(i)!==v.id?(s(),k(R,{key:0},{default:e(()=>[r(W(v.name),1)]),_:2},1024)):(s(),k(I,{key:1,modelValue:l(a),"onUpdate:modelValue":d[1]||(d[1]=D=>K(a)?a.value=D:null),density:"compact",variant:"outlined","hide-details":"",autofocus:"",onKeyup:[G(D=>g(v.id),["enter"]),G(T,["esc"])],onClick:d[2]||(d[2]=Y(()=>{},["stop"]))},null,8,["modelValue","onKeyup"])),t(L,null,{default:e(()=>[r(" Created "+W(O(v.created))+" â€¢ "+W(v.tasks?.length||0)+" tasks ",1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),128)),l(_).length===0?(s(),k(M,{key:0},{default:e(()=>[t(R,{class:"text-center text-medium-emphasis"},{default:e(()=>[...d[8]||(d[8]=[r(" No workspaces yet ",-1)])]),_:1})]),_:1})):$("",!0)]),_:1}),t(J,null,{default:e(()=>[t(h),t(U),t(n,{variant:"text",onClick:d[3]||(d[3]=v=>c.value=!1)},{default:e(()=>[...d[9]||(d[9]=[r("Close",-1)])]),_:1}),t(n,{color:"primary",variant:"tonal",to:"/"},{default:e(()=>[t(C,{start:""},{default:e(()=>[...d[10]||(d[10]=[r("mdi-plus",-1)])]),_:1}),d[11]||(d[11]=r(" New Workspace ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},xe={__name:"WorkspaceHeader",props:{taskCount:{type:Number,default:0},hasWorkspace:{type:Boolean,default:!1}},setup(p){return(f,_)=>{const b=be,c=o("v-card-subtitle"),i=o("v-btn"),a=o("v-card-title"),u=o("v-card");return s(),k(u,{class:"mb-4",variant:"flat"},{default:e(()=>[t(a,{class:"d-flex justify-space-between align-center"},{default:e(()=>[A("div",null,[t(b),t(c,{class:"pa-0"},{default:e(()=>[r(W(p.taskCount)+" task"+W(p.taskCount!==1?"s":""),1)]),_:1})]),p.hasWorkspace?$("",!0):(s(),k(i,{key:0,color:"primary",variant:"tonal",to:"/"},{default:e(()=>[..._[0]||(_[0]=[r(" Create Workspace ",-1)])]),_:1}))]),_:1})]),_:1})}}},Ce={};function Te(p,f){const _=fe;return s(),k(_,{placeholder:"Search tasks in this workspace..."})}const Ve=Object.assign(le(Ce,[["render",Te]]),{__name:"SearchCard"}),we={__name:"OverdueAlert",props:{count:{type:Number,required:!0}},emits:["reschedule"],setup(p){return(f,_)=>{const b=o("v-icon"),c=o("v-btn"),i=o("v-card-text"),a=o("v-card");return s(),k(a,{class:"mb-4",color:"error",variant:"tonal"},{default:e(()=>[t(i,{class:"d-flex justify-space-between align-center"},{default:e(()=>[A("div",null,[t(b,{start:""},{default:e(()=>[..._[1]||(_[1]=[r("mdi-alert",-1)])]),_:1}),r(" You have "+W(p.count)+" overdue task"+W(p.count!==1?"s":""),1)]),t(c,{color:"error",variant:"flat",onClick:_[0]||(_[0]=u=>f.$emit("reschedule"))},{default:e(()=>[..._[2]||(_[2]=[r(" Move All to Today ",-1)])]),_:1})]),_:1})]),_:1})}}},Se={__name:"TaskList",props:{tasks:{type:Array,default:()=>[]},completedCount:{type:Number,default:0}},emits:["task-updated","task-deleted","clear-completed","edit-image","edit-note-image","move-task"],setup(p,{emit:f}){const _=f,b=ve(),c=te(),i=ae(()=>b.current.value.dark?"background-color: rgba(255, 255, 255, 0.05)":"background-color: rgba(0, 0, 0, 0.03)"),a=S=>{c.toggleTaskComplete(S)},u=S=>{_("edit-image",S)},N=S=>{_("edit-note-image",S)};return(S,g)=>{const T=o("v-chip"),O=o("v-btn"),x=ke,d=o("v-card-text"),C=o("v-card");return s(),F("div",null,[A("div",{class:"d-flex justify-space-between align-center mb-4 pa-3 rounded-lg",style:pe(l(i))},[g[5]||(g[5]=A("span",{class:"text-h6 font-weight-medium"},"Tasks",-1)),A("div",null,[p.completedCount>0?(s(),k(T,{key:0,size:"small",variant:"tonal",class:"me-2"},{default:e(()=>[r(W(p.completedCount)+" completed ",1)]),_:1})):$("",!0),p.completedCount>0?(s(),k(O,{key:1,size:"small",variant:"text",color:"error",onClick:g[0]||(g[0]=n=>S.$emit("clear-completed"))},{default:e(()=>[...g[4]||(g[4]=[r(" Clear Completed ",-1)])]),_:1})):$("",!0)])],4),(s(!0),F(X,null,ee(p.tasks,n=>(s(),k(x,{key:n.id,task:n,onUpdate:g[1]||(g[1]=y=>S.$emit("task-updated",y)),onDelete:g[2]||(g[2]=y=>S.$emit("task-deleted",y)),onToggleComplete:a,onEditImage:u,onEditNoteImage:N,onMoveTask:g[3]||(g[3]=y=>S.$emit("move-task",y)),class:"mb-3"},null,8,["task"]))),128)),p.tasks.length===0?(s(),k(C,{key:0,variant:"flat"},{default:e(()=>[t(d,{class:"text-center py-8 text-medium-emphasis"},{default:e(()=>[...g[6]||(g[6]=[r(" No tasks yet. Stop horsing around. ",-1)])]),_:1})]),_:1})):$("",!0)])}}},Ne={};function Ue(p,f){const _=o("v-icon"),b=o("v-card-text"),c=o("v-card");return s(),k(c,{class:"mt-8",variant:"flat"},{default:e(()=>[t(b,{class:"text-center py-16"},{default:e(()=>[t(_,{icon:"mdi-folder-open-outline",size:"80",color:"grey-lighten-1",class:"mb-6"}),f[0]||(f[0]=A("h2",{class:"text-h4 mb-3 text-grey-darken-2"},"No workspace selected",-1)),f[1]||(f[1]=A("p",{class:"text-body-1 text-grey mb-6"}," Select a workspace from the sidebar to view and manage your tasks ",-1))]),_:1})]),_:1})}const Ie=Object.assign(le(Ne,[["render",Ue]]),{__name:"EmptyState"}),$e={class:"text-body-2 text-medium-emphasis mt-1",style:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},De={__name:"MoveTaskDialog",props:{modelValue:{type:Boolean,default:!1},currentWorkspaceId:{type:String,required:!0},taskName:{type:String,default:"this task"}},emits:["update:modelValue","confirm"],setup(p,{emit:f}){const _=p,b=f,c=te(),{workspaces:i}=oe(c),a=w(null),u=ae(()=>i.value.filter(g=>g.id!==_.currentWorkspaceId));Z(()=>_.modelValue,g=>{g||(a.value=null)});const N=()=>{a.value&&(b("confirm",a.value),b("update:modelValue",!1))},S=()=>{a.value=null,b("update:modelValue",!1)};return(g,T)=>{const O=o("v-card-title"),x=o("v-list-item-title"),d=o("v-list-item-subtitle"),C=o("v-list-item"),n=o("v-list"),y=o("v-alert"),R=o("v-card-text"),I=o("v-spacer"),L=o("v-btn"),M=o("v-card-actions"),B=o("v-card"),h=o("v-dialog");return s(),k(h,{"model-value":p.modelValue,"onUpdate:modelValue":T[0]||(T[0]=U=>g.$emit("update:modelValue",U)),"max-width":"500"},{default:e(()=>[t(B,null,{default:e(()=>[t(O,null,{default:e(()=>[T[1]||(T[1]=r(" Move Task ",-1)),A("div",$e,' Select destination workspace for "'+W(p.taskName)+'" ',1)]),_:1}),t(R,null,{default:e(()=>[l(u).length>0?(s(),k(n,{key:0},{default:e(()=>[(s(!0),F(X,null,ee(l(u),U=>(s(),k(C,{key:U.id,value:U.id,onClick:J=>a.value=U.id,active:l(a)===U.id,rounded:"",class:"mb-2"},{default:e(()=>[t(x,null,{default:e(()=>[r(W(U.name),1)]),_:2},1024),t(d,null,{default:e(()=>[r(W(U.tasks?.length||0)+" task"+W(U.tasks?.length!==1?"s":""),1)]),_:2},1024)]),_:2},1032,["value","onClick","active"]))),128))]),_:1})):(s(),k(y,{key:1,type:"info",variant:"tonal",class:"mt-2"},{default:e(()=>[...T[2]||(T[2]=[r(" No other workspaces available. Create a new workspace first. ",-1)])]),_:1}))]),_:1}),t(M,null,{default:e(()=>[t(I),t(L,{variant:"text",onClick:S},{default:e(()=>[...T[3]||(T[3]=[r(" Cancel ",-1)])]),_:1}),t(L,{color:"primary",variant:"flat",disabled:!l(a),onClick:N},{default:e(()=>[...T[4]||(T[4]=[r(" Move Task ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},We={class:"d-flex align-start w-100"},ze={class:"flex-grow-1",style:{"word-break":"break-word","min-width":"0"}},Ae={class:"d-flex align-center ml-2",style:{"flex-shrink":"0"}},Oe={key:0,class:"mt-2"},Ee={key:1,class:"text-center py-4 text-medium-emphasis"},Re={__name:"TaskNotesModal",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(p,{emit:f}){const _=p,b=f,c=w(!1),i=w([]),a=w(""),u=w(null),N=w("");Z(c,n=>{n&&(i.value=JSON.parse(JSON.stringify(_.modelValue||[])))});const S=()=>{a.value.trim()&&(i.value.push({text:a.value,imageUrl:null}),a.value="")},g=n=>{i.value.splice(n,1)},T=n=>{u.value=n,N.value=i.value[n].imageUrl||""},O=n=>{i.value[n].imageUrl=N.value||null,x()},x=()=>{u.value=null,N.value=""},d=()=>{b("update:modelValue",i.value),c.value=!1},C=()=>{i.value=[],a.value="",c.value=!1};return(n,y)=>{const R=o("v-icon"),I=o("v-btn"),L=o("v-card-title"),M=o("v-chip"),B=o("v-text-field"),h=o("v-expand-transition"),U=o("v-list-item"),J=o("v-list"),m=o("v-divider"),V=o("v-card-text"),v=o("v-spacer"),D=o("v-card-actions"),q=o("v-card"),H=o("v-dialog");return s(),k(H,{modelValue:c.value,"onUpdate:modelValue":y[2]||(y[2]=z=>c.value=z),"max-width":"600"},{activator:e(({props:z})=>[t(I,_e(z,{variant:"outlined",block:"",class:"mb-3"}),{default:e(()=>[t(R,{start:""},{default:e(()=>[...y[3]||(y[3]=[r("mdi-note-text",-1)])]),_:1}),r(" "+W(p.modelValue.length>0?`Notes (${p.modelValue.length})`:"Add Notes"),1)]),_:1},16)]),default:e(()=>[t(q,null,{default:e(()=>[t(L,null,{default:e(()=>[...y[4]||(y[4]=[r("Task Notes",-1)])]),_:1}),t(V,null,{default:e(()=>[i.value.length>0?(s(),k(J,{key:0,class:"mb-3"},{default:e(()=>[(s(!0),F(X,null,ee(i.value,(z,j)=>(s(),k(U,{key:j,class:"px-0"},{default:e(()=>[A("div",We,[A("div",ze,W(z.text),1),A("div",Ae,[z.imageUrl?(s(),k(M,{key:0,size:"small",color:"success",variant:"tonal",class:"ms-2"},{default:e(()=>[t(R,{start:"",size:"small"},{default:e(()=>[...y[5]||(y[5]=[r("mdi-image",-1)])]),_:1}),y[6]||(y[6]=r(" Image ",-1))]),_:1})):$("",!0),t(I,{icon:z.imageUrl?"mdi-image-edit":"mdi-image-plus",size:"small",variant:"text",onClick:P=>T(j)},null,8,["icon","onClick"]),t(I,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:P=>g(j)},null,8,["onClick"])])]),t(h,null,{default:e(()=>[u.value===j?(s(),F("div",Oe,[t(B,{modelValue:N.value,"onUpdate:modelValue":y[0]||(y[0]=P=>N.value=P),label:"Image URL for this note",density:"compact",variant:"outlined","hide-details":"",onKeyup:[G(P=>O(j),["enter"]),G(x,["esc"])]},{"append-inner":e(()=>[t(I,{icon:"mdi-check",size:"x-small",variant:"text",color:"success",onClick:P=>O(j)},null,8,["onClick"])]),_:2},1032,["modelValue","onKeyup"])])):$("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(s(),F("div",Ee," No notes yet ")),t(m,{class:"mb-3"}),t(B,{modelValue:a.value,"onUpdate:modelValue":y[1]||(y[1]=z=>a.value=z),label:"Add a note...",density:"compact",variant:"outlined","hide-details":"",onKeyup:G(S,["enter"])},{"append-inner":e(()=>[t(I,{icon:"mdi-plus",size:"small",variant:"text",disabled:!a.value.trim(),onClick:S},null,8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),t(D,null,{default:e(()=>[t(v),t(I,{variant:"text",onClick:C},{default:e(()=>[...y[7]||(y[7]=[r("Cancel",-1)])]),_:1}),t(I,{color:"primary",variant:"flat",onClick:d},{default:e(()=>[...y[8]||(y[8]=[r("Save Notes",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Me={__name:"AddTaskForm",props:{modelValue:{type:Boolean,default:!1}},emits:["task-added","update:modelValue"],setup(p,{emit:f}){const _=p,b=f,c=w(""),i=w(!1),a=w(""),u=w(""),N=w([]),S=w(!1);Z(i,C=>{C&&!a.value&&T()}),Z(()=>_.modelValue,C=>{C&&(c.value="",i.value=!1,a.value="",u.value="",N.value=[],S.value=!1)});const g=C=>{if(!C)return!1;try{const n=new URL(C);return n.protocol==="http:"||n.protocol==="https:"}catch{return!1}},T=()=>{const C=new Date;a.value=C.toISOString().split("T")[0]},O=()=>{const C=new Date;C.setDate(C.getDate()+1),a.value=C.toISOString().split("T")[0]},x=()=>{if(!c.value.trim())return;const C={id:Date.now().toString(),text:c.value,created:new Date().toISOString(),hasDeadline:i.value,due:i.value&&a.value?a.value:null,completed:!1,completedAt:null,imageUrl:u.value&&g(u.value)?u.value:null,notes:N.value||[]};b("task-added",C),d()},d=()=>{b("update:modelValue",!1)};return(C,n)=>{const y=o("v-toolbar-title"),R=o("v-spacer"),I=o("v-btn"),L=o("v-toolbar"),M=o("v-text-field"),B=o("v-checkbox"),h=o("v-col"),U=o("v-btn-group"),J=o("v-row"),m=o("v-expand-transition"),V=o("v-sheet"),v=o("v-icon"),D=Re,q=o("v-img"),H=o("v-card-text"),z=o("v-card-actions"),j=o("v-card"),P=o("v-dialog");return s(),k(P,{"model-value":p.modelValue,"onUpdate:modelValue":n[5]||(n[5]=E=>C.$emit("update:modelValue",E)),"max-width":"500",persistent:""},{default:e(()=>[t(j,null,{default:e(()=>[t(L,{color:"primary",dark:"",flat:""},{default:e(()=>[t(y,null,{default:e(()=>[...n[6]||(n[6]=[r("New Task",-1)])]),_:1}),t(R),t(I,{icon:"mdi-close",onClick:d})]),_:1}),t(H,{class:"pa-6"},{default:e(()=>[t(M,{modelValue:l(c),"onUpdate:modelValue":n[0]||(n[0]=E=>K(c)?c.value=E:null),label:"What needs to be done?",variant:"solo-filled",flat:"",autofocus:"","hide-details":"",class:"mb-4"},null,8,["modelValue"]),t(V,{color:C.$vuetify.theme.current.dark?"grey-darken-3":"grey-lighten-4",rounded:"",class:"pa-3 mb-4"},{default:e(()=>[t(J,{align:"center","no-gutters":""},{default:e(()=>[t(h,null,{default:e(()=>[t(B,{modelValue:l(i),"onUpdate:modelValue":n[1]||(n[1]=E=>K(i)?i.value=E:null),label:"Add deadline","hide-details":"",density:"compact"},null,8,["modelValue"])]),_:1}),l(i)?(s(),k(h,{key:0,cols:"auto"},{default:e(()=>[t(U,{variant:"tonal",density:"compact"},{default:e(()=>[t(I,{onClick:T},{default:e(()=>[...n[7]||(n[7]=[r("Today",-1)])]),_:1}),t(I,{onClick:O},{default:e(()=>[...n[8]||(n[8]=[r("Tomorrow",-1)])]),_:1})]),_:1})]),_:1})):$("",!0)]),_:1}),t(m,null,{default:e(()=>[l(i)?(s(),k(M,{key:0,modelValue:l(a),"onUpdate:modelValue":n[2]||(n[2]=E=>K(a)?a.value=E:null),type:"date",variant:"outlined",density:"compact","hide-details":"",class:"mt-3"},null,8,["modelValue"])):$("",!0)]),_:1})]),_:1},8,["color"]),A("div",null,[n[10]||(n[10]=A("div",{class:"text-caption text-medium-emphasis mb-2"},"OPTIONAL",-1)),t(M,{modelValue:l(u),"onUpdate:modelValue":n[3]||(n[3]=E=>K(u)?u.value=E:null),label:"Image URL",variant:"outlined",density:"compact","hide-details":"",clearable:"",class:"mb-3"},{"append-inner":e(()=>[l(u)&&g(l(u))?(s(),k(v,{key:0,color:"success",size:"small"},{default:e(()=>[...n[9]||(n[9]=[r(" mdi-check ",-1)])]),_:1})):$("",!0)]),_:1},8,["modelValue"]),t(D,{modelValue:l(N),"onUpdate:modelValue":n[4]||(n[4]=E=>K(N)?N.value=E:null)},null,8,["modelValue"]),t(m,null,{default:e(()=>[l(u)&&g(l(u))?(s(),k(q,{key:0,src:l(u),"max-height":"150",class:"rounded mt-3",cover:""},null,8,["src"])):$("",!0)]),_:1})])]),_:1}),t(z,{class:"px-6 pb-4"},{default:e(()=>[t(R),t(I,{variant:"text",onClick:d},{default:e(()=>[...n[11]||(n[11]=[r("Cancel",-1)])]),_:1}),t(I,{color:"primary",variant:"flat",size:"large",onClick:x,disabled:!l(c).trim()},{default:e(()=>[...n[12]||(n[12]=[r(" Create Task ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},je={__name:"index",setup(p){const f=te(),{currentWorkspace:_,currentTasks:b,filteredCurrentTasks:c,completedCount:i,overdueCount:a}=oe(f),u=w(!1),N=w(""),S=w(""),g=w(null),T=w(""),O=w(null),x=w(!1),d=w(null),C=m=>{d.value=m,x.value=!0},n=m=>{d.value&&_.value&&f.moveTaskToWorkspace(d.value.id,_.value.id,m)&&console.log("Task moved successfully"),x.value=!1,d.value=null};ne(()=>{f.loadFromStorage()});const y=()=>{const m=f.rescheduleOverdueTasks();console.log(`Rescheduled ${m} tasks to today`)},R=m=>{const V=[...b.value,m];f.updateCurrentTasks(V),f.clearSearch()},I=m=>{const V=b.value.map(v=>v.id===m.id?m:v);f.updateCurrentTasks(V)},L=m=>{const V=b.value.filter(v=>v.id!==m);f.updateCurrentTasks(V)},M=m=>{if(m.type==="task"){const V=b.value.map(v=>v.id===m.taskId?{...v,imageUrl:m.url}:v);f.updateCurrentTasks(V)}else if(m.type==="note"){const V=b.value.map(v=>{if(v.id===m.taskId){const D=[...v.notes||[]];return D[m.noteIndex]&&(D[m.noteIndex].imageUrl=m.url),{...v,notes:D}}return v});f.updateCurrentTasks(V)}u.value=!1},B=m=>{N.value=m.task.imageUrl,S.value=m.task.imageUrl||"",g.value=m.task.id,T.value="task",u.value=!0},h=m=>{N.value=m.note.imageUrl,S.value=m.note.imageUrl||"",g.value=m.task.id,O.value=m.index,T.value="note",u.value=!0},U=w(!1),J=()=>{U.value=!0};return(m,V)=>{const v=xe,D=o("v-btn"),q=o("v-col"),H=Ve,z=o("v-row"),j=o("v-card-text"),P=o("v-card"),E=we,se=Se,de=Ie,ie=ge,ue=De,re=Me,ce=o("v-container");return s(),k(ce,{class:"py-8"},{default:e(()=>[t(z,null,{default:e(()=>[t(q,{cols:"12",md:"8",class:"mx-auto"},{default:e(()=>[t(v,{"task-count":l(c).length,"has-workspace":!!l(_)},null,8,["task-count","has-workspace"]),l(_)?(s(),k(P,{key:0,class:"mb-4",variant:"flat"},{default:e(()=>[t(j,{class:"pa-3"},{default:e(()=>[t(z,{align:"center",dense:""},{default:e(()=>[t(q,{cols:"12",md:"4"},{default:e(()=>[t(D,{color:"primary",height:"48",block:"",variant:"flat","prepend-icon":"mdi-plus",onClick:J},{default:e(()=>[...V[3]||(V[3]=[r(" Add New Task ",-1)])]),_:1})]),_:1}),t(q,{cols:"12",md:"8",class:"pr-md-2"},{default:e(()=>[t(H)]),_:1})]),_:1})]),_:1})]),_:1})):$("",!0),l(a)>0&&l(_)?(s(),k(E,{key:1,count:l(a),onReschedule:y},null,8,["count"])):$("",!0),l(_)?(s(),k(se,{key:2,tasks:l(c),"completed-count":l(i),onTaskUpdated:I,onTaskDeleted:L,onClearCompleted:l(f).clearCompleted,onEditImage:B,onEditNoteImage:h,onMoveTask:C},null,8,["tasks","completed-count","onClearCompleted"])):$("",!0),l(_)?$("",!0):(s(),k(de,{key:3}))]),_:1})]),_:1}),t(ie,{modelValue:l(u),"onUpdate:modelValue":V[0]||(V[0]=Q=>K(u)?u.value=Q:null),"image-url":l(S),"task-id":l(g),type:l(T),"note-index":l(O),onUpdate:M},null,8,["modelValue","image-url","task-id","type","note-index"]),t(ue,{modelValue:l(x),"onUpdate:modelValue":V[1]||(V[1]=Q=>K(x)?x.value=Q:null),"current-workspace-id":l(_)?.id||"","task-name":l(d)?.text,onConfirm:n},null,8,["modelValue","current-workspace-id","task-name"]),t(re,{modelValue:l(U),"onUpdate:modelValue":V[2]||(V[2]=Q=>K(U)?U.value=Q:null),onTaskAdded:R},null,8,["modelValue"])]),_:1})}}};export{je as default};
