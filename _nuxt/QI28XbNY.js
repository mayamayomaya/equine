import{P as F,g as a,I as m,y as n,J as I,L as k,_ as J,V as P,r as E,k as A,C as o,B as l,N as y,T as K,x as V,z as D,X as B,A as h,D as g,K as M,R as W,S as X,U as G}from"#entry";import{u as Y}from"./C95MDVUh.js";const de={__name:"TaskSearch",props:{placeholder:{type:String,default:"Search tasks..."},global:{type:Boolean,default:!1}},setup(e){const p=Y(),{searchQuery:d}=F(p),x=c=>{p.setSearchQuery(c||"")};return(c,r)=>{const i=a("v-text-field");return n(),m(i,{"model-value":k(d),"onUpdate:modelValue":x,placeholder:e.placeholder,"prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:"","onClick:clear":r[0]||(r[0]=f=>k(p).clearSearch()),onKeyup:r[1]||(r[1]=I(f=>k(p).clearSearch(),["escape"]))},null,8,["model-value","placeholder"])}}},Z={key:2,class:"mb-3"},ee={class:"flex-grow-1 text-body-2"},te={class:"text-caption text-medium-emphasis"},ae={key:0,class:"text-success"},oe={__name:"TaskCard",props:{task:{type:Object,required:!0},showMoveAction:{type:Boolean,default:!0}},emits:["update","delete","toggle-complete","edit-image","edit-note-image","move-task"],setup(e,{emit:p}){const d=e,x=p,c=P(),r=E(!1),i=E(""),f=A(()=>{if(!d.task.due)return!1;const s=new Date;s.setHours(0,0,0,0);const t=new Date(d.task.due);return t.setHours(0,0,0,0),t<s}),v=A(()=>c.current.value.dark?"grey-darken-3":"grey-lighten-5"),_=s=>s?new Date(s).toLocaleDateString():"No date",z=()=>{d.task.completed||(r.value=!0,i.value=d.task.text)},w=()=>{if(!i.value.trim()){U();return}x("update",{...d.task,text:i.value}),r.value=!1,i.value=""},U=()=>{r.value=!1,i.value=""};return(s,t)=>{const b=a("v-img"),$=a("v-col"),C=a("v-chip"),R=a("v-text-field"),L=a("v-sheet"),O=a("v-row"),H=a("v-card-text"),N=a("v-icon"),S=a("v-btn"),Q=a("v-spacer"),j=a("v-card-actions"),q=a("v-card");return n(),m(q,{variant:e.task.completed?"tonal":"elevated",elevation:e.task.completed?0:1,class:B({"task-completed":e.task.completed})},{default:o(()=>[l(H,null,{default:o(()=>[l(O,{"no-gutters":"",align:"start"},{default:o(()=>[e.task.imageUrl&&!e.task.completed?(n(),m($,{key:0,cols:"auto",class:"pr-3"},{default:o(()=>[l(b,{src:e.task.imageUrl,width:"100",height:"100",class:"rounded",cover:"",onClick:t[0]||(t[0]=K(u=>s.$emit("edit-image",{task:e.task,type:"task"}),["stop"])),style:{cursor:"pointer"}},null,8,["src"])]),_:1})):y("",!0),l($,null,{default:o(()=>[k(r)?(n(),m(R,{key:1,modelValue:k(i),"onUpdate:modelValue":t[1]||(t[1]=u=>M(i)?i.value=u:null),density:"compact",variant:"outlined","hide-details":"",autofocus:"",onKeyup:[I(w,["enter"]),I(U,["esc"])],onBlur:w},null,8,["modelValue"])):(n(),V("div",{key:0,onClick:z,style:{cursor:"pointer"},class:"mb-3"},[D("span",{class:B(["text-body-1",{"text-decoration-line-through text-medium-emphasis":e.task.completed}]),style:{"font-size":"1.125rem !important","font-weight":"500","line-height":"1.4"}},h(e.task.text),3),k(f)&&!e.task.completed?(n(),m(C,{key:0,size:"x-small",color:"error",variant:"flat",class:"ms-2"},{default:o(()=>[...t[6]||(t[6]=[g(" OVERDUE ",-1)])]),_:1})):y("",!0)])),e.task.notes&&e.task.notes.length>0?(n(),V("div",Z,[t[7]||(t[7]=D("div",{class:"text-caption text-medium-emphasis mb-2"},"Notes:",-1)),(n(!0),V(W,null,X(e.task.notes,(u,T)=>(n(),m(L,{key:T,class:"d-flex align-center pa-2 mb-2",rounded:"",elevation:"1",color:k(v)},{default:o(()=>[D("div",ee,h(u.text),1),u.imageUrl?(n(),m(b,{key:0,src:u.imageUrl,"max-width":"60","max-height":"40",class:"rounded ms-2",cover:"",onClick:K(le=>s.$emit("edit-note-image",{task:e.task,note:u,index:T}),["stop"]),style:{cursor:"pointer"}},null,8,["src","onClick"])):y("",!0)]),_:2},1032,["color"]))),128))])):y("",!0),D("div",te,[e.task.completed?(n(),V("span",ae," Completed "+h(_(e.task.completedAt))+" • ",1)):y("",!0),g(" Added "+h(_(e.task.created))+" ",1),e.task.due?(n(),V("span",{key:1,class:B(k(f)&&!e.task.completed?"text-error":"text-primary")}," • Due "+h(_(e.task.due)),3)):y("",!0)])]),_:1})]),_:1})]),_:1}),l(j,{class:"pt-0"},{default:o(()=>[e.task.completed?(n(),m(S,{key:1,variant:"text",size:"small",onClick:t[3]||(t[3]=u=>s.$emit("toggle-complete",e.task.id))},{default:o(()=>[l(N,{start:"",size:"small"},{default:o(()=>[...t[10]||(t[10]=[g("mdi-undo",-1)])]),_:1}),t[11]||(t[11]=g(" Undo ",-1))]),_:1})):(n(),m(S,{key:0,variant:"text",size:"small",color:"success",onClick:t[2]||(t[2]=u=>s.$emit("toggle-complete",e.task.id))},{default:o(()=>[l(N,{start:"",size:"small"},{default:o(()=>[...t[8]||(t[8]=[g("mdi-check",-1)])]),_:1}),t[9]||(t[9]=g(" Mark as complete ",-1))]),_:1})),l(Q),e.showMoveAction&&!e.task.completed?(n(),m(S,{key:2,icon:"mdi-folder-move",variant:"text",size:"small",onClick:t[4]||(t[4]=u=>s.$emit("move-task",e.task)),title:"Move to another workspace"})):y("",!0),l(S,{icon:"mdi-delete",variant:"text",size:"small",color:"error",onClick:t[5]||(t[5]=u=>s.$emit("delete",e.task.id))})]),_:1})]),_:1},8,["variant","elevation","class"])}}},ie=J(oe,[["__scopeId","data-v-a3c69917"]]),re={__name:"ImageEditDialog",props:{modelValue:{type:Boolean,default:!1},imageUrl:{type:String,default:""},taskId:{type:String,default:null},type:{type:String,default:"task"},noteIndex:{type:Number,default:null}},emits:["update:modelValue","update"],setup(e,{emit:p}){const d=e,x=p,c=E("");G(()=>d.modelValue,f=>{f&&(c.value=d.imageUrl||"")});const r=()=>{x("update",{url:c.value,taskId:d.taskId,type:d.type,noteIndex:d.noteIndex}),i()},i=()=>{c.value="",x("update:modelValue",!1)};return(f,v)=>{const _=a("v-img"),z=a("v-text-field"),w=a("v-card-text"),U=a("v-spacer"),s=a("v-btn"),t=a("v-card-actions"),b=a("v-card"),$=a("v-dialog");return n(),m($,{"model-value":e.modelValue,"onUpdate:modelValue":v[1]||(v[1]=C=>f.$emit("update:modelValue",C)),"max-width":"800"},{default:o(()=>[l(b,null,{default:o(()=>[l(_,{src:e.imageUrl,"max-height":"400"},null,8,["src"]),l(w,null,{default:o(()=>[l(z,{modelValue:k(c),"onUpdate:modelValue":v[0]||(v[0]=C=>M(c)?c.value=C:null),label:"Image URL",variant:"outlined",density:"compact",clearable:"",onKeyup:I(r,["enter"])},null,8,["modelValue"])]),_:1}),l(t,null,{default:o(()=>[l(U),l(s,{variant:"text",onClick:i},{default:o(()=>[...v[2]||(v[2]=[g(" Cancel ",-1)])]),_:1}),l(s,{color:"primary",variant:"flat",onClick:r},{default:o(()=>[...v[3]||(v[3]=[g(" Update Image ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}};export{de as _,ie as a,re as b};
