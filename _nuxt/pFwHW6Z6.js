import{r as f,g as a,I as O,y as C,C as t,B as e,D as r,J as z,K as B,L as V,M as D,q as E,x as M,z as q,N as F,A as W,_ as K,O as j}from"#entry";const R={__name:"NewWorkspaceModal",setup(v){const s=f(!1),c=f(""),i=()=>{if(!c.value.trim())return;const _={id:Date.now().toString(),name:c.value,created:new Date().toISOString(),tasks:[]},n=JSON.parse(localStorage.getItem("equine-workspaces")||"[]");n.push(_),localStorage.setItem("equine-workspaces",JSON.stringify(n)),localStorage.setItem("current-workspace",_.id),c.value="",s.value=!1,E("/task")};return(_,n)=>{const p=a("v-btn"),k=a("v-card-title"),w=a("v-text-field"),S=a("v-card-text"),g=a("v-spacer"),b=a("v-card-actions"),I=a("v-card"),x=a("v-dialog");return C(),O(x,{modelValue:V(s),"onUpdate:modelValue":n[2]||(n[2]=l=>B(s)?s.value=l:null),"max-width":"500"},{activator:t(({props:l})=>[e(p,D({color:"primary",variant:"flat",size:"large",class:"mb-3",block:""},l),{default:t(()=>[...n[3]||(n[3]=[r(" New Equine Workspace ",-1)])]),_:1},16)]),default:t(()=>[e(I,null,{default:t(()=>[e(k,null,{default:t(()=>[...n[4]||(n[4]=[r("Create New Workspace",-1)])]),_:1}),e(S,null,{default:t(()=>[e(w,{modelValue:V(c),"onUpdate:modelValue":n[0]||(n[0]=l=>B(c)?c.value=l:null),label:"Workspace Name",variant:"outlined",onKeyup:z(i,["enter"])},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(g),e(p,{variant:"text",onClick:n[1]||(n[1]=l=>s.value=!1)},{default:t(()=>[...n[5]||(n[5]=[r("Cancel",-1)])]),_:1}),e(p,{color:"primary",variant:"flat",onClick:i,disabled:!V(c).trim()},{default:t(()=>[...n[6]||(n[6]=[r(" Create ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},H={__name:"UploadWorkspaceButton",props:{label:{type:String,default:"Upload Equine Workspace"},variant:{type:String,default:"tonal"},color:{type:String,default:"green"},size:{type:String,default:"large"},icon:{type:Boolean,default:!1},block:{type:Boolean,default:!0}},emits:["workspaces-loaded"],setup(v,{emit:s}){const c=s,i=f(!1),_=f(0),n=f(null),p=f(!1),k=f(""),w=f("success"),S=async l=>{const o=l.target.files[0];if(o){try{const d=await o.text(),u=JSON.parse(d);let m=Array.isArray(u)?u:u.workspaces;if(!m||!Array.isArray(m))throw new Error("Invalid workspace file format");const y=JSON.parse(localStorage.getItem("equine-workspaces")||"[]");y.length>0?(_.value=y.length,n.value=m,i.value=!0):g(m,!1)}catch(d){console.error("Upload failed:",d),x("Failed to read file. Is it valid JSON?","error")}l.target.value=""}},g=(l,o=!1)=>{try{if(o){const d=JSON.parse(localStorage.getItem("equine-workspaces")||"[]");l.forEach(m=>{d.some(y=>y.id===m.id)&&(m.id=Date.now().toString()+Math.random().toString(36).substr(2,9))});const u=[...d,...l];localStorage.setItem("equine-workspaces",JSON.stringify(u)),x(`Added ${l.length} workspace(s)`,"success")}else localStorage.setItem("equine-workspaces",JSON.stringify(l)),l.length>0&&!localStorage.getItem("current-workspace")&&localStorage.setItem("current-workspace",l[0].id),x(`Imported ${l.length} workspace(s)`,"success");c("workspaces-loaded"),setTimeout(()=>window.location.reload(),1500)}catch(d){console.error("Import failed:",d),x("Failed to import workspaces","error")}},b=()=>{g(n.value,!0),i.value=!1},I=()=>{g(n.value,!1),i.value=!1},x=(l,o="success")=>{k.value=l,w.value=o,p.value=!0};return(l,o)=>{const d=a("v-icon"),u=a("v-btn"),m=a("v-card-title"),y=a("v-card-text"),J=a("v-spacer"),T=a("v-card-actions"),U=a("v-card"),$=a("v-dialog"),A=a("v-snackbar");return C(),M("div",null,[e(u,{color:v.color,variant:v.variant,size:v.size,block:v.block,onClick:o[0]||(o[0]=N=>l.$refs.fileInput.click())},{default:t(()=>[v.icon?(C(),O(d,{key:0,start:""},{default:t(()=>[...o[4]||(o[4]=[r("mdi-upload",-1)])]),_:1})):F("",!0),r(" "+W(v.label),1)]),_:1},8,["color","variant","size","block"]),q("input",{ref:"fileInput",type:"file",accept:".json",style:{display:"none"},onChange:S},null,544),e($,{modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=N=>i.value=N),"max-width":"500"},{default:t(()=>[e(U,null,{default:t(()=>[e(m,null,{default:t(()=>[...o[5]||(o[5]=[r("Workspace Conflict",-1)])]),_:1}),e(y,null,{default:t(()=>[r(" You already have "+W(_.value)+" workspace(s). How should we handle the import? ",1)]),_:1}),e(T,null,{default:t(()=>[e(J),e(u,{variant:"text",onClick:o[1]||(o[1]=N=>i.value=!1)},{default:t(()=>[...o[6]||(o[6]=[r("Cancel",-1)])]),_:1}),e(u,{color:"warning",variant:"text",onClick:I},{default:t(()=>[...o[7]||(o[7]=[r("Replace All",-1)])]),_:1}),e(u,{color:"primary",variant:"flat",onClick:b},{default:t(()=>[...o[8]||(o[8]=[r("Merge",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(A,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=N=>p.value=N),color:w.value,timeout:3e3},{default:t(()=>[r(W(k.value),1)]),_:1},8,["modelValue","color"])])}}},L={},P={class:"text-center mt-3"};function Y(v,s){const c=a("v-card-title"),i=a("v-card-subtitle"),_=R,n=H,p=j,k=a("v-card-actions"),w=a("v-card"),S=a("v-col"),g=a("v-row"),b=a("v-container");return C(),O(b,{class:"py-8"},{default:t(()=>[e(g,{justify:"center"},{default:t(()=>[e(S,{cols:"12",sm:"8",md:"6",lg:"5"},{default:t(()=>[e(w,null,{default:t(()=>[e(c,{class:"text-h4 font-weight-bold pb-2"},{default:t(()=>[...s[0]||(s[0]=[r(" Equine ",-1)])]),_:1}),e(i,{class:"text-body-1 pb-4"},{default:t(()=>[...s[1]||(s[1]=[r(" Task management, without the nonsense, and horses!. ",-1)])]),_:1}),e(k,{class:"flex-column align-stretch pa-4 pt-0"},{default:t(()=>[e(_),e(n),q("div",P,[e(p),s[2]||(s[2]=q("div",{class:"text-caption text-medium-emphasis"},"Switch Theme",-1))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Q=K(L,[["render",Y]]);export{Q as default};
